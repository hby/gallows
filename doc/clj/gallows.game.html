<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>gallows.game documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Gallows</span> <span class="project-version">0.1.0-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>gallows</span></div></div></li><li class="depth-2 branch current"><a href="gallows.game.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>game</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>routes</span></div></div></li><li class="depth-3 branch"><a href="gallows.routes.transit.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>transit</span></div></a></li><li class="depth-3"><a href="gallows.routes.websockets.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>websockets</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="gallows.game.html#var--.3Emessage"><div class="inner"><span>-&gt;message</span></div></a></li><li class="depth-1"><a href="gallows.game.html#var-add-player"><div class="inner"><span>add-player</span></div></a></li><li class="depth-1"><a href="gallows.game.html#var-add-word"><div class="inner"><span>add-word</span></div></a></li><li class="depth-1"><a href="gallows.game.html#var-channel-data"><div class="inner"><span>channel-data</span></div></a></li><li class="depth-1"><a href="gallows.game.html#var-channels"><div class="inner"><span>channels</span></div></a></li><li class="depth-1"><a href="gallows.game.html#var-handle-message"><div class="inner"><span>handle-message</span></div></a></li><li class="depth-1"><a href="gallows.game.html#var-id"><div class="inner"><span>id</span></div></a></li><li class="depth-1"><a href="gallows.game.html#var-id-.3Echannel"><div class="inner"><span>id-&gt;channel</span></div></a></li><li class="depth-1"><a href="gallows.game.html#var-next-id"><div class="inner"><span>next-id</span></div></a></li><li class="depth-1"><a href="gallows.game.html#var-remove-player"><div class="inner"><span>remove-player</span></div></a></li><li class="depth-1"><a href="gallows.game.html#var-report-game"><div class="inner"><span>report-game</span></div></a></li><li class="depth-1"><a href="gallows.game.html#var-send-to-all-channels"><div class="inner"><span>send-to-all-channels</span></div></a></li><li class="depth-1"><a href="gallows.game.html#var-send-to-channels"><div class="inner"><span>send-to-channels</span></div></a></li><li class="depth-1"><a href="gallows.game.html#var-set-players-to-all-channels"><div class="inner"><span>set-players-to-all-channels</span></div></a></li><li class="depth-1"><a href="gallows.game.html#var-update-name"><div class="inner"><span>update-name</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">gallows.game</h1><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var--.3Emessage"><h3>-&gt;message</h3><div class="usage"><code>(-&gt;message type payload)</code></div><div class="doc"><pre class="plaintext">This is a convenince function for creating consistent messages.
All messages will be a map with two keys, :type and :payload.
The value of :payload is a general Clojure dataa structure.

type    - message type, should be a keyword
payload - message payload, clojure data structure</pre></div></div><div class="public anchor" id="var-add-player"><h3>add-player</h3><div class="usage"><code>(add-player channel)</code></div><div class="doc"><pre class="plaintext">Adds the player channel to the game.

channel - websocket channel</pre></div></div><div class="public anchor" id="var-add-word"><h3>add-word</h3><div class="usage"><code>(add-word channel {:keys [word], :as msg})</code></div><div class="doc"><pre class="plaintext">Adds a new word for the player associated with the channel.

channel - websocket channel
msg     - message payload from client, {:word word}</pre></div></div><div class="public anchor" id="var-channel-data"><h3>channel-data</h3><div class="usage"><code>(channel-data channel)</code></div><div class="doc"><pre class="plaintext">Returns the player data for the channel

channel - a ws channel</pre></div></div><div class="public anchor" id="var-channels"><h3>channels</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-handle-message"><h3>handle-message</h3><div class="usage"><code>(handle-message channel {:keys [type payload], :as msg})</code></div><div class="doc"><pre class="plaintext">Perform the game logic for client message.
Dispatch payload according to (msg :type).

channel - websocket channel
msg     - message type and payload from client</pre></div></div><div class="public anchor" id="var-id"><h3>id</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-id-.3Echannel"><h3>id-&gt;channel</h3><div class="usage"><code>(id-&gt;channel uid)</code></div><div class="doc"><pre class="plaintext">Returns the channel for which uid is a player&apos;s id.

uid - a user id</pre></div></div><div class="public anchor" id="var-next-id"><h3>next-id</h3><div class="usage"><code>(next-id)</code></div><div class="doc"><pre class="plaintext">Atomically returns the next id.
</pre></div></div><div class="public anchor" id="var-remove-player"><h3>remove-player</h3><div class="usage"><code>(remove-player channel)</code></div><div class="doc"><pre class="plaintext">Removes the player channel from the game.

channel - websocket channel</pre></div></div><div class="public anchor" id="var-report-game"><h3>report-game</h3><div class="usage"><code>(report-game channel {:keys [outcome player], :as msg})</code></div><div class="doc"><pre class="plaintext">Send a message to a player that the player associated with the channel
won or lost a game with their word.

channel - websocket channel
msg     - message payload from client, {:outcome outcome :player player}
          where outcome - :win or :lose
                player  - client game player data to send the message</pre></div></div><div class="public anchor" id="var-send-to-all-channels"><h3>send-to-all-channels</h3><div class="usage"><code>(send-to-all-channels msg)</code></div><div class="doc"><pre class="plaintext">Sends message to all connected channels.

msg - message to send, clojure data structure</pre></div></div><div class="public anchor" id="var-send-to-channels"><h3>send-to-channels</h3><div class="usage"><code>(send-to-channels msg &amp; channels)</code></div><div class="doc"><pre class="plaintext">Sends message to all given channel arguments.

msg      - message to send, clojure data structure
channels - websocket channels</pre></div></div><div class="public anchor" id="var-set-players-to-all-channels"><h3>set-players-to-all-channels</h3><div class="usage"><code>(set-players-to-all-channels)</code></div><div class="doc"><pre class="plaintext">Send a :set-players message to all channels.
The payload is {:players [players]} where players is all of the connected
players except the one that is being sent the message.</pre></div></div><div class="public anchor" id="var-update-name"><h3>update-name</h3><div class="usage"><code>(update-name channel {:keys [name]})</code></div><div class="doc"><pre class="plaintext">Updates the player&apos;s name associated with the channel.

channel - websocket channel
msg     - message payload from client, {:name name}</pre></div></div></div></body></html>